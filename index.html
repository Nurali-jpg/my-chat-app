<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ß–∞—Ç —Å —Ä–µ–∞–∫—Ü–∏—è–º–∏ –Ω–∞ —Ç–µ–∫—Å—Ç</title>
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js';
        import { getFirestore, collection, addDoc, onSnapshot, serverTimestamp, query, orderBy, updateDoc, doc as firestoreDoc } from 'https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js';

        const firebaseConfig = {
            apiKey: "AIzaSyB_y9YYVJMFIAW_uOoJ5HAAupllEckw4E8",
            authDomain: "test0-e7c10.firebaseapp.com",
            projectId: "test0-e7c10",
            storageBucket: "test0-e7c10.appspot.com",
            messagingSenderId: "383308995691",
            appId: "1:383308995691:web:704d81923b0e512d09252e"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        document.addEventListener("DOMContentLoaded", () => {
            const chat = document.getElementById("chat");
            const reactionsContainer = document.getElementById("reactions-container");
            const reactionButtons = ['üëç', '‚ù§Ô∏è', 'üòÇ', 'üòÆ', 'üò¢', 'üò°'];
            const reactionsCount = {};

            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∞–∫—Ü–∏–π
            function showReactions() {
                reactionsContainer.innerHTML = '';
                reactionButtons.forEach(emoji => {
                    const button = document.createElement("button");
                    button.textContent = emoji;
                    button.style.marginRight = "5px";

                    const count = reactionsCount[emoji] || 0;
                    const countElement = document.createElement("span");
                    countElement.textContent = count > 0 ? `${count}` : '';
                    countElement.style.marginLeft = '5px';

                    button.appendChild(countElement);
                    reactionsContainer.appendChild(button);

                    button.addEventListener("click", () => {
                        reactionsCount[emoji] = (reactionsCount[emoji] || 0) + 1;
                        showReactions(); // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∞–∫—Ü–∏–π
                    });
                });
            }

            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
            const randomText = document.createElement("div");
            randomText.textContent = "–≠—Ç–æ —Ä–∞–Ω–¥–æ–º–Ω—ã–π —Ç–µ–∫—Å—Ç. –ù–∞–≤–µ–¥–∏—Ç–µ –∫—É—Ä—Å–æ—Ä, —á—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å —Ä–µ–∞–∫—Ü–∏—é.";
            randomText.style.fontSize = "40px";
            randomText.style.border = "1px solid #000";
            randomText.style.padding = "10px";
            randomText.style.position = "relative"; // –ü–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–±—Å–æ–ª—é—Ç–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Ä–µ–∞–∫—Ü–∏–π

            chat.appendChild(randomText);

            // –ü–æ–∫–∞–∑–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å —Ä–µ–∞–∫—Ü–∏—è–º–∏ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
            randomText.addEventListener("mouseenter", () => {
                reactionsContainer.style.display = "block"; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä–µ–∞–∫—Ü–∏–π
                showReactions(); // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ç–µ–∫—É—â–∏–µ —Ä–µ–∞–∫—Ü–∏–∏
            });

            // –°–∫—Ä—ã—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å —Ä–µ–∞–∫—Ü–∏—è–º–∏, –µ—Å–ª–∏ –∫—É—Ä—Å–æ—Ä —É—Ö–æ–¥–∏—Ç –æ—Ç —Ç–µ–∫—Å—Ç–∞ –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Ä–µ–∞–∫—Ü–∏–π
            randomText.addEventListener("mouseleave", () => {
                if (!reactionsContainer.matches(':hover')) {
                    reactionsContainer.style.display = "none"; // –°–∫—Ä—ã–≤–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä–µ–∞–∫—Ü–∏–π
                }
            });

            reactionsContainer.style.position = "absolute"; // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä–µ–∞–∫—Ü–∏–π
            reactionsContainer.style.display = "none"; // –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç
            reactionsContainer.style.border = "1px solid #ccc";
            reactionsContainer.style.padding = "10px";
            reactionsContainer.style.backgroundColor = "white";
            reactionsContainer.style.zIndex = "1";

            chat.appendChild(reactionsContainer);
        });
    </script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
        }
        #chat {
            border: 1px solid #ccc;
            padding: 10px;
            height: 300px;
            overflow-y: scroll;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>

    <h1>–ß–∞—Ç —Å —Ä–µ–∞–∫—Ü–∏—è–º–∏ –Ω–∞ —Ç–µ–∫—Å—Ç</h1>
    <div id="chat"></div>
    <div id="reactions-container"></div>

</body>
</html>
